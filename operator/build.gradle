plugins {
    id 'base'
    id 'com.github.blindpirate.gogradle' version '0.11.3'
    id 'com.bmuschko.docker-remote-api' version '4.8.1'
}

ext {
    binaryFullPath = "$buildDir/bin/dse-${project.name}"
}

golang {
    packagePath = 'github.com/riptano/dse-operator'
    goVersion = '1.12.5'
    goExecutable = 'IGNORE_LOCAL'
}

dependencies {
    golang {
        build(['pruneopts': 'NT', 'name': 'github.com/asaskevich/EventBus', 'commit': 'd46933a94f05c6657d7b923fcf5ac563ee37ec79', 'branch': 'master'])
        build(['pruneopts': 'NT', 'digest': '1:75a1e28db58f0ddf4016b7ce798d6d9e3b0aab01b7a9921972a68e95f2eec352', 'name': 'cloud.google.com/go', 'commit': '8c41231e01b2085512d98153bcffb847ff9b4b9f', 'tag': 'v0.38.0', 'subpackages': ['compute/metadata']])
        build(['pruneopts': 'NT', 'digest': '1:6974cb842e66a4600006200e47a067278ea5671d4f7114be67c01a3af5affa7d', 'name': 'contrib.go.opencensus.io/exporter/ocagent', 'commit': 'dcb33c7f3b7cfe67e8a2cea10207ede1b7c40764', 'tag': 'v0.4.12', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:14f0a1264c1013e381bf771317cfd382c60c663b72053e27e050690c19ee004d', 'name': 'github.com/Azure/go-autorest', 'commit': 'fe1ebaab71ae2a2ab8a55f62ebe54cffd842acc2', 'tag': 'v12.0.0', 'subpackages': ['autorest', 'autorest/adal', 'autorest/azure', 'autorest/date', 'logger', 'tracing']])
        build(['pruneopts': 'NT', 'digest': '1:0a111edd8693fd977f42a0c4f199a0efb13c20aec9da99ad8830c7bb6a87e8d6', 'name': 'github.com/PuerkitoBio/purell', 'commit': '44968752391892e1b0d0b821ee79e9a85fa13049', 'tag': 'v1.1.1', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:8098cd40cd09879efbf12e33bcd51ead4a66006ac802cd563a66c4f3373b9727', 'name': 'github.com/PuerkitoBio/urlesc', 'commit': 'de5bf2ad457846296e2031421a34e2568e304e35', 'branch': 'master', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:680b63a131506e668818d630d3ca36123ff290afa0afc9f4be21940adca3f27d', 'name': 'github.com/appscode/jsonpatch', 'commit': '7c0e3b262f30165a8ec3d0b4c6059fd92703bfb2', 'tag': '1.0.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:c819830f4f5ef85874a90ac3cbcc96cd322c715f5c96fbe4722eacd3dafbaa07', 'name': 'github.com/beorn7/perks', 'commit': '4b2b341e8d7715fae06375aa633dbb6e91b3fb46', 'tag': 'v1.0.0', 'subpackages': ['quantile']])
        build(['pruneopts': 'NT', 'digest': '1:13af3d205c774ec0bbda45fee1a4089f3cd9a55c5367b527698b34550ec15e71', 'name': 'github.com/census-instrumentation/opencensus-proto', 'commit': 'a105b96453fe85139acc07b68de48f2cbdd71249', 'tag': 'v0.2.0', 'subpackages': ['gen-go/agent/common/v1', 'gen-go/agent/metrics/v1', 'gen-go/agent/trace/v1', 'gen-go/metrics/v1', 'gen-go/resource/v1', 'gen-go/trace/v1']])
        build(['pruneopts': 'NT', 'digest': '1:0c4193043b1a33c7f9ba4ea42b8af2c09bb3d51970212d42e4dac8aa217b4ca5', 'name': 'github.com/coreos/prometheus-operator', 'commit': '7a25bf6b6bb2347dacb235659b73bc210117acc7', 'tag': 'v0.29.0', 'subpackages': ['pkg/apis/monitoring', 'pkg/apis/monitoring/v1', 'pkg/client/versioned/scheme', 'pkg/client/versioned/typed/monitoring/v1']])
        build(['pruneopts': 'NT', 'digest': '1:4b8b5811da6970495e04d1f4e98bb89518cc3cfc3b3f456bdb876ed7b6c74049', 'name': 'github.com/davecgh/go-spew', 'commit': '8991bc29aa16c548c550c7ff78260e27b9ab7c73', 'tag': 'v1.1.1', 'subpackages': ['spew']])
        build(['pruneopts': 'NT', 'digest': '1:3a5601f7ac7fc10fc2a98039b18d83a767f3830141a08c19ae45c45244f43e57', 'name': 'github.com/dgrijalva/jwt-go', 'commit': '06ea1031745cb8b3dab3f6a236daf2b0aa468b7e', 'tag': 'v3.2.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:1302bdd23af4264a095d48c2c28660a8ecf2e02454ce172cef5cb946029a1383', 'name': 'github.com/emicklei/go-restful', 'commit': 'b9bbc5664f49b6deec52393bd68f39830687a347', 'tag': 'v2.9.3', 'subpackages': ['...', 'log']])
        build(['pruneopts': 'NT', 'digest': '1:81466b4218bf6adddac2572a30ac733a9255919bc2f470b4827a317bd4ee1756', 'name': 'github.com/ghodss/yaml', 'commit': '0ca9ea5df5451ffdf184b4428c902747c2c11cd7', 'tag': 'v1.0.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:d421af4c4fe51d399667d573982d663fe1fa67020a88d3ae43466ebfe8e2b5c9', 'name': 'github.com/go-logr/logr', 'commit': '9fb12b3b21c5415d16ac18dc5cd42c1cfdd40c4e', 'tag': 'v0.1.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:340497a512995aa69c0add901d79a2096b3449d35a44a6f1f1115091a9f8c687', 'name': 'github.com/go-logr/zapr', 'commit': '03f06a783fbb7dfaf3f629c7825480e43a7105e6', 'tag': 'v0.1.1', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:260f7ebefc63024c8dfe2c9f1a2935a89fa4213637a1f522f592f80c001cc441', 'name': 'github.com/go-openapi/jsonpointer', 'commit': 'ef5f0afec364d3b9396b7b77b43dbe26bf1f8004', 'tag': 'v0.19.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:98abd61947ff5c7c6fcfec5473d02a4821ed3a2dd99a4fbfdb7925b0dd745546', 'name': 'github.com/go-openapi/jsonreference', 'commit': '8483a886a90412cd6858df4ea3483dce9c8e35a3', 'tag': 'v0.19.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:ac672f42180ef887536774396f5a79b4f426b6338f46bbe17a6ef8da9adc24ea', 'name': 'github.com/go-openapi/spec', 'commit': '9d9763c0ce87242cb4611b52b8601987f01eb4ed', 'branch': 'master', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:076ebf43e6e70f18ef9d079a685ede59a0f4dc9247256c209cf57407f959cef9', 'name': 'github.com/go-openapi/swag', 'commit': 'b3e2804c8535ee0d1b89320afd98474d5b8e9e3b', 'tag': 'v0.19.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:53151cc4366e3945282d4b783fd41f35222cabbc75601e68d8133648c63498d1', 'name': 'github.com/gobuffalo/envy', 'commit': '043cb4b8af871b49563291e32c66bb84378a60ac', 'tag': 'v1.7.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:0b39706cfa32c1ba9e14435b5844d04aef81b60f44b6077e61e0607d56692603', 'name': 'github.com/gogo/protobuf', 'commit': 'ba06b47c162d49f2af050fb4c75bcbc86a159d5c', 'tag': 'v1.2.1', 'subpackages': ['proto', 'sortkeys']])
        build(['pruneopts': 'NT', 'digest': '1:e2b86e41f3d669fc36b50d31d32d22c8ac656c75aa5ea89717ce7177e134ff2a', 'name': 'github.com/golang/glog', 'commit': '23def4e6c14b4da8ac2ed8007337bc5eb5007998', 'branch': 'master', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:20b774dcfdf0fff3148432beb828c52404f3eb3d70b7ce71ae0356ed6cbc2bae', 'name': 'github.com/golang/groupcache', 'commit': '5b532d6fd5efaf7fa130d4e859a2fde0fc3a9e1b', 'branch': 'master', 'subpackages': ['lru']])
        build(['pruneopts': 'NT', 'digest': '1:d7212166c4b7f30a20fb3de70ab7e36564900b2e36360ffd31958b5af8fed025', 'name': 'github.com/golang/protobuf', 'commit': 'b5d812f8a3706043e23a9cd5babf2e5423744d30', 'tag': 'v1.3.1', 'subpackages': ['jsonpb', 'proto', 'protoc-gen-go/descriptor', 'protoc-gen-go/generator', 'protoc-gen-go/generator/internal/remap', 'protoc-gen-go/plugin', 'ptypes', 'ptypes/any', 'ptypes/duration', 'ptypes/struct', 'ptypes/timestamp', 'ptypes/wrappers']])
        build(['pruneopts': 'NT', 'digest': '1:05f95ffdfcf651bdb0f05b40b69e7f5663047f8da75c72d58728acb59b5cc107', 'name': 'github.com/google/btree', 'commit': '4030bb1f1f0c35b30ca7009e9ebd06849dd45306', 'tag': 'v1.0.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:52c5834e2bebac9030c97cc0798ac11c3aa8a39f098aeb419f142533da6cd3cc', 'name': 'github.com/google/gofuzz', 'commit': 'f140a6486e521aad38f5917de355cbf147cc0496', 'tag': 'v1.0.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:ab3ec1fe3e39bac4b3ab63390767766622be35b7cab03f47f787f9ec60522a53', 'name': 'github.com/google/uuid', 'commit': '0cd6bf5da1e1c83f8b45653022c74f71af0538a4', 'tag': 'v1.1.1', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:289332c13b80edfefc88397cce5266c16845dcf204fa2f6ac7e464ee4c7f6e96', 'name': 'github.com/googleapis/gnostic', 'commit': '7c663266750e7d82587642f65e60bc4083f1f84e', 'tag': 'v0.2.0', 'subpackages': ['OpenAPIv2', 'compiler', 'extensions']])
        build(['pruneopts': 'NT', 'digest': '1:607c3efe3cb21684994be705505b8661f11657ba3d7dda93a913053d03c24abd', 'name': 'github.com/gophercloud/gophercloud', 'commit': '6f9faf57fddcafd31b69d28122dce7bb5ce3bc5c', 'branch': 'master', 'subpackages': ['...', 'openstack', 'openstack/identity/v2/tenants', 'openstack/identity/v2/tokens', 'openstack/identity/v3/tokens', 'openstack/utils', 'pagination']])
        build(['pruneopts': 'NT', 'digest': '1:bb7bd892abcb75ef819ce2efab9d54d22b7e38dc05ffac55428bb0578b52912b', 'name': 'github.com/gregjones/httpcache', 'commit': '3befbb6ad0cc97d4c25d851e9528915809e1a22f', 'branch': 'master', 'subpackages': ['...', 'diskcache']])
        build(['pruneopts': 'NT', 'digest': '1:a7c074d45b8583256608461e6a69d9948d65167d81eacc39c540a420641c3a6c', 'name': 'github.com/grpc-ecosystem/grpc-gateway', 'commit': '20f268a412e5b342ebfb1a0eef7c3b7bd6c260ea', 'tag': 'v1.8.5', 'subpackages': ['internal', 'runtime', 'utilities']])
        build(['pruneopts': 'NT', 'digest': '1:52094d0f8bdf831d1a2401e9b6fee5795fdc0b2a2d1f8bb1980834c289e79129', 'name': 'github.com/hashicorp/golang-lru', 'commit': '7087cb70de9f7a8bc0a10c375cb0d2280a8edf9c', 'tag': 'v0.5.1', 'subpackages': ['...', 'simplelru']])
        build(['pruneopts': 'NT', 'digest': '1:aaa38889f11896ee3644d77e17dc7764cc47f5f3d3b488268df2af2b52541c5f', 'name': 'github.com/imdario/mergo', 'commit': '7c29201646fa3de8506f701213473dd407f19646', 'tag': 'v0.3.7', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:f5b9328966ccea0970b1d15075698eff0ddb3e75889560aad2e9f76b289b536a', 'name': 'github.com/joho/godotenv', 'commit': '23d116af351c84513e1946b527c88823e476be13', 'tag': 'v1.3.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:0fbdc0dfdabfa16d50dd7151b7efe3189ffb0df68fa9866dc35240bfea39ad92', 'name': 'github.com/json-iterator/go', 'commit': '0ff49de124c6f76f8494e194af75bde0f1a49a29', 'tag': 'v1.1.6', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:782fb677791a7fe7b5b8e637bcf695efb13950ce09e3e8e3b1cf21c57649be7c', 'name': 'github.com/mailru/easyjson', 'commit': '1ea4449da9834f4d333f1cc461c374aea217d249', 'branch': 'master', 'subpackages': ['buffer', 'jlexer', 'jwriter']])
        build(['pruneopts': 'NT', 'digest': '1:56dbf15e091bf7926cb33a57cb6bdfc658fc6d3498d2f76f10a97ce7856f1fde', 'name': 'github.com/markbates/inflect', 'commit': '24b83195037b3bc61fcda2d28b7b0518bce293b6', 'tag': 'v1.0.4', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:ea1db000388d88b31db7531c83016bef0d6db0d908a07794bfc36aca16fbf935', 'name': 'github.com/matttproud/golang_protobuf_extensions', 'commit': 'c12348ce28de40eed0136aa2b644d0ee0650e56c', 'tag': 'v1.0.1', 'subpackages': ['pbutil']])
        build(['pruneopts': 'NT', 'digest': '1:2f42fa12d6911c7b7659738758631bec870b7e9b4c6be5444f963cdcfccc191f', 'name': 'github.com/modern-go/concurrent', 'commit': 'bacd9c7ef1dd9b15be4a9909b8ac7a4e313eec94', 'tag': '1.0.3', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:c6aca19413b13dc59c220ad7430329e2ec454cc310bc6d8de2c7e2b93c18a0f6', 'name': 'github.com/modern-go/reflect2', 'commit': '4b7aa43c6742a2c18fdef89dd197aaae7dac7ccd', 'tag': '1.0.1', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:bc2b0110bf386a85c2dd9729ac08c7f47015fa7800e6deefb9c90bdbd301ac90', 'name': 'github.com/operator-framework/operator-sdk', 'commit': 'afcac611d1e58d09d16ef60c104e131823f78c56', 'branch': 'master', 'subpackages': ['pkg/k8sutil', 'pkg/leader', 'pkg/log/zap', 'pkg/metrics', 'version']])
        build(['pruneopts': 'NT', 'digest': '1:93b1d84c5fa6d1ea52f4114c37714cddd84d5b78f151b62bb101128dd51399bf', 'name': 'github.com/pborman/uuid', 'commit': 'adf5a7427709b9deb95d29d3fa8a2bf9cfd388f1', 'tag': 'v1.2', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:bf2ac97824a7221eb16b096aecc1c390d4c8a4e49524386aaa2e2dd215cbfb31', 'name': 'github.com/petar/GoLLRB', 'commit': '53be0d36a84c2a886ca057d34b6aa4468df9ccb4', 'branch': 'master', 'subpackages': ['llrb']])
        build(['pruneopts': 'NT', 'digest': '1:d8139b87c97ab035e546f58bb812ec6eb11518ec7dff03694e5427bc67ca7c0f', 'name': 'github.com/peterbourgon/diskv', 'commit': '0be1b92a6df0e4f5cb0a5d15fb7f643d0ad93ce6', 'tag': 'v3.0.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:14715f705ff5dfe0ffd6571d7d201dd8e921030f8070321a79380d8ca4ec1a24', 'name': 'github.com/pkg/errors', 'commit': 'ba968bfe8b2f7e042a574c888954fccecfa385b4', 'tag': 'v0.8.1', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:ec2a29e3bd141038ae5c3d3a4f57db0c341fcc1d98055a607aedd683aed124ee', 'name': 'github.com/prometheus/client_golang', 'commit': '505eaef017263e299324067d40ca2c48f6a2cf50', 'tag': 'v0.9.2', 'subpackages': ['prometheus', 'prometheus/internal', 'prometheus/promhttp']])
        build(['pruneopts': 'NT', 'digest': '1:c2cc5049e927e2749c0d5163c9f8d924880d83e84befa732b9aad0b6be227bed', 'name': 'github.com/prometheus/client_model', 'commit': 'fd36f4220a901265f90734c3183c5f0c91daa0b8', 'branch': 'master', 'subpackages': ['go']])
        build(['pruneopts': 'NT', 'digest': '1:f173d6232eefd6f25afe9c603aed065c80adb7e4c9cbc30f534db8792fcebdba', 'name': 'github.com/prometheus/common', 'commit': 'a82f4c12f983cc2649298185f296632953e50d3e', 'tag': 'v0.3.0', 'subpackages': ['expfmt', 'internal/bitbucket.org/ww/goautoneg', 'model']])
        build(['pruneopts': 'NT', 'digest': '1:bca8581280a9ba8187941c57f08a89baeaeb87e97f3f093c9a59928425e7bde3', 'name': 'github.com/prometheus/procfs', 'commit': '740c0778500738e56e1877d52904c431a3fdc573', 'branch': 'master', 'subpackages': ['...', 'internal/fs']])
        build(['pruneopts': 'NT', 'digest': '1:a4644e85e1f29f9825a4e61dcdd8244fe7c4db02eead3f508d5a5bdf7924dbbd', 'name': 'github.com/rogpeppe/go-internal', 'commit': '438578804ca6f31be148c27683afc419ce47c06e', 'tag': 'v1.3.0', 'subpackages': ['modfile', 'module', 'semver']])
        build(['pruneopts': 'NT', 'digest': '1:49b6e0d199dc20969bf7c9d14647313e1dd1b102178fad4ca999d8a9584edfab', 'name': 'github.com/spf13/afero', 'commit': '588a75ec4f32903aa5e39a2619ba6a4631e28424', 'tag': 'v1.2.2', 'subpackages': ['...', 'mem']])
        build(['pruneopts': 'NT', 'digest': '1:9d8420bbf131d1618bde6530af37c3799340d3762cc47210c1d9532a4c3a2779', 'name': 'github.com/spf13/pflag', 'commit': '298182f68c66c05229eb03ac171abe6e309ee79a', 'tag': 'v1.0.3', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:8bcb2616463bc981681c4b26f2aa817be8167682b76fb7884ec3fafdc9f82372', 'name': 'go.opencensus.io', 'commit': '43463a80402d8447b7fce0d2c58edf1687ff0b58', 'tag': 'v0.19.3', 'subpackages': ['...', 'internal', 'internal/tagencoding', 'metric/metricdata', 'metric/metricproducer', 'plugin/ocgrpc', 'plugin/ochttp', 'plugin/ochttp/propagation/b3', 'plugin/ochttp/propagation/tracecontext', 'resource', 'stats', 'stats/internal', 'stats/view', 'tag', 'trace', 'trace/internal', 'trace/propagation', 'trace/tracestate']])
        build(['pruneopts': 'NT', 'digest': '1:cc9d86ec4e6e3bdf87e3a421273bfeed003cf8e21351c0302fe8b0eb7b10efe6', 'name': 'go.uber.org/atomic', 'commit': 'df976f2515e274675050de7b3f42545de80594fd', 'tag': 'v1.4.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:58ca93bdf81bac106ded02226b5395a0595d5346cdc4caa8d9c1f3a5f8f9976e', 'name': 'go.uber.org/multierr', 'commit': '3c4937480c32f4c13a875a1829af76c98ca3d40a', 'tag': 'v1.1.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:80f7b1f444dbbe5b64a5174c6726af3243a4770fb19daaae9613c4d615a9684a', 'name': 'go.uber.org/zap', 'commit': '27376062155ad36be76b0f12cf1572a221d3a48c', 'tag': 'v1.10.0', 'subpackages': ['...', 'buffer', 'internal/bufferpool', 'internal/color', 'internal/exit', 'zapcore']])
        build(['pruneopts': 'NT', 'digest': '1:5f92996be2964f7a413cc8c6b7ff02e88e02db6042371b7acadc06cd9dc5a658', 'name': 'golang.org/x/crypto', 'commit': 'a29dc8fdc73485234dbef99ebedb95d2eced08de', 'branch': 'master', 'subpackages': ['ssh/terminal']])
        build(['pruneopts': 'NT', 'digest': '1:0df70eb73174e6e58e2c986150b16c61859bea5a7b1a1801f37e12fb1c8ab8d1', 'name': 'golang.org/x/net', 'commit': 'f4e77d36d62c17c2336347bb2670ddbd02d092b7', 'branch': 'master', 'subpackages': ['context', 'context/ctxhttp', 'http/httpguts', 'http2', 'http2/hpack', 'idna', 'internal/timeseries', 'trace']])
        build(['pruneopts': 'NT', 'digest': '1:54c605b4036ec49dbc4c887969128d5ee68140cf0bbec46e67cbb2497e69c15e', 'name': 'golang.org/x/oauth2', 'commit': '9f3314589c9a9136388751d9adae6b0ed400978a', 'branch': 'master', 'subpackages': ['...', 'google', 'internal', 'jws', 'jwt']])
        build(['pruneopts': 'NT', 'digest': '1:bde1844fd8dff0a4ed259e24bf0e3cb91c2bc7bc3cd0a43118c6ef8f8be1b9ca', 'name': 'golang.org/x/sync', 'commit': '112230192c580c3556b8cee6403af37a4fc5f28c', 'branch': 'master', 'subpackages': ['semaphore']])
        build(['pruneopts': 'NT', 'digest': '1:f6f05f9ec9528c3efdfb6dabad9967592b233718eac942110150f351eb559b96', 'name': 'golang.org/x/sys', 'commit': 'ca7f33d4116e3a1f9425755d6a44e7ed9b4c97df', 'branch': 'master', 'subpackages': ['unix', 'windows']])
        build(['pruneopts': 'NT', 'digest': '1:348fa8283a7c60b5b71ce04d27b37f7c0fce552d4d0b463b5b3ebbd1840d3f1a', 'name': 'golang.org/x/text', 'commit': '342b2e1fbaa52c93f31447ad2c6abc048c63e475', 'tag': 'v0.3.2', 'subpackages': ['collate', 'collate/build', 'internal/colltab', 'internal/gen', 'internal/language', 'internal/language/compact', 'internal/tag', 'internal/triegen', 'internal/ucd', 'language', 'secure/bidirule', 'transform', 'unicode/bidi', 'unicode/cldr', 'unicode/norm', 'unicode/rangetable', 'width']])
        build(['pruneopts': 'NT', 'digest': '1:9fdc2b55e8e0fafe4b41884091e51e77344f7dc511c5acedcfd98200003bff90', 'name': 'golang.org/x/time', 'commit': '9d24e82272b4f38b78bc8cff74fa936d31ccd8ef', 'branch': 'master', 'subpackages': ['rate']])
        build(['pruneopts': 'NT', 'digest': '1:bcf56e37684fdc9d161bf7b3fd560797ec45744d709d3e60015c4d5e74429739', 'name': 'golang.org/x/tools', 'commit': '3b6f9c0030f769fa3ded8a7f0d9420c71ac20caf', 'branch': 'master', 'subpackages': ['go/ast/astutil', 'go/gcexportdata', 'go/internal/gcimporter', 'go/internal/packagesdriver', 'go/packages', 'go/types/typeutil', 'imports', 'internal/fastwalk', 'internal/gopathwalk', 'internal/module', 'internal/semver']])
        build(['pruneopts': 'NT', 'digest': '1:81d407dcb2347a544350b7fb394e0eb065a34c75dc235fd4c6061ea72024a485', 'name': 'google.golang.org/api', 'commit': '067bed655e9cbc26f4dbac8f8897b30756d90990', 'tag': 'v0.4.0', 'subpackages': ['support/bundler']])
        build(['pruneopts': 'NT', 'digest': '1:711179d92dbef98932acd7afd0dab80b4cf2d97f099f3285c9ba8fa451809fec', 'name': 'google.golang.org/appengine', 'commit': '54a98f90d1c46b7731eb8fb305d2a321c30ef610', 'tag': 'v1.5.0', 'subpackages': ['...', 'internal', 'internal/app_identity', 'internal/base', 'internal/datastore', 'internal/log', 'internal/modules', 'internal/remote_api', 'internal/urlfetch', 'urlfetch']])
        build(['pruneopts': 'NT', 'digest': '1:e1b8ee648569a7b7166ee847f7c5eff99e6bcb4a206f859dc865fcb6f25274ab', 'name': 'google.golang.org/genproto', 'commit': '54afdca5d873f7b529e2ce3def1a99df16feda90', 'branch': 'master', 'subpackages': ['googleapis/api/httpbody', 'googleapis/rpc/status', 'protobuf/field_mask']])
        build(['pruneopts': 'NT', 'digest': '1:5761833c144990cd4ce4136a99284f5323116c9c063a1953f0bda38483a9c3cb', 'name': 'google.golang.org/grpc', 'commit': '25c4f928eaa6d96443009bd842389fb4fa48664e', 'tag': 'v1.20.1', 'subpackages': ['...', 'balancer', 'balancer/base', 'balancer/roundrobin', 'binarylog/grpc_binarylog_v1', 'codes', 'connectivity', 'credentials', 'credentials/internal', 'encoding', 'encoding/proto', 'grpclog', 'internal', 'internal/backoff', 'internal/balancerload', 'internal/binarylog', 'internal/channelz', 'internal/envconfig', 'internal/grpcrand', 'internal/grpcsync', 'internal/syscall', 'internal/transport', 'keepalive', 'metadata', 'naming', 'peer', 'resolver', 'resolver/dns', 'resolver/passthrough', 'stats', 'status', 'tap']])
        build(['pruneopts': 'NT', 'digest': '1:2d1fbdc6777e5408cabeb02bf336305e724b925ff4546ded0fa8715a7267922a', 'name': 'gopkg.in/inf.v0', 'commit': 'd2d2541c53f18d2a059457998ce2876cc8e67cbf', 'tag': 'v0.9.1', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:18108594151654e9e696b27b181b953f9a90b16bf14d253dd1b397b025a1487f', 'name': 'gopkg.in/yaml.v2', 'commit': '51d6538a90f86fe93ac480b35f37b2be17fef232', 'tag': 'v2.2.2', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:6fa82ea248029bbbdddade20c06ab177ff6e485e5e45e48b045707415b7efd34', 'name': 'k8s.io/api', 'commit': '05914d821849570fba9eacfb29466f2d8d3cd229', 'subpackages': ['admission/v1beta1', 'admissionregistration/v1alpha1', 'admissionregistration/v1beta1', 'apps/v1', 'apps/v1beta1', 'apps/v1beta2', 'auditregistration/v1alpha1', 'authentication/v1', 'authentication/v1beta1', 'authorization/v1', 'authorization/v1beta1', 'autoscaling/v1', 'autoscaling/v2beta1', 'autoscaling/v2beta2', 'batch/v1', 'batch/v1beta1', 'batch/v2alpha1', 'certificates/v1beta1', 'coordination/v1beta1', 'core/v1', 'events/v1beta1', 'extensions/v1beta1', 'networking/v1', 'policy/v1beta1', 'rbac/v1', 'rbac/v1alpha1', 'rbac/v1beta1', 'scheduling/v1alpha1', 'scheduling/v1beta1', 'settings/v1alpha1', 'storage/v1', 'storage/v1alpha1', 'storage/v1beta1']])
        build(['pruneopts': 'NT', 'digest': '1:c6f23048e162e65d586c809fd02e263e180ad157f110df17437c22517bb59a4b', 'name': 'k8s.io/apiextensions-apiserver', 'commit': '0fe22c71c47604641d9aa352c785b7912c200562', 'subpackages': ['pkg/apis/apiextensions', 'pkg/apis/apiextensions/v1beta1']])
        build(['pruneopts': 'NT', 'digest': '1:15b5c41ff6faa4d0400557d4112d6337e1abc961c65513d44fce7922e32c9ca7', 'name': 'k8s.io/apimachinery', 'commit': '2b1284ed4c93a43499e781493253e2ac5959c4fd', 'subpackages': ['pkg/api/errors', 'pkg/api/meta', 'pkg/api/resource', 'pkg/apis/meta/internalversion', 'pkg/apis/meta/v1', 'pkg/apis/meta/v1/unstructured', 'pkg/apis/meta/v1beta1', 'pkg/conversion', 'pkg/conversion/queryparams', 'pkg/fields', 'pkg/labels', 'pkg/runtime', 'pkg/runtime/schema', 'pkg/runtime/serializer', 'pkg/runtime/serializer/json', 'pkg/runtime/serializer/protobuf', 'pkg/runtime/serializer/recognizer', 'pkg/runtime/serializer/streaming', 'pkg/runtime/serializer/versioning', 'pkg/selection', 'pkg/types', 'pkg/util/cache', 'pkg/util/clock', 'pkg/util/diff', 'pkg/util/errors', 'pkg/util/framer', 'pkg/util/intstr', 'pkg/util/json', 'pkg/util/mergepatch', 'pkg/util/naming', 'pkg/util/net', 'pkg/util/runtime', 'pkg/util/sets', 'pkg/util/strategicpatch', 'pkg/util/uuid', 'pkg/util/validation', 'pkg/util/validation/field', 'pkg/util/wait', 'pkg/util/yaml', 'pkg/version', 'pkg/watch', 'third_party/forked/golang/json', 'third_party/forked/golang/reflect']])
        build(['pruneopts': 'NT', 'digest': '1:c904a3d70131b33df36e4e51b574226b82308fc1ea66964aa21095a95d453fc9', 'name': 'k8s.io/client-go', 'commit': '8d9ed539ba3134352c586810e749e58df4e94e4f', 'subpackages': ['discovery', 'dynamic', 'kubernetes', 'kubernetes/scheme', 'kubernetes/typed/admissionregistration/v1alpha1', 'kubernetes/typed/admissionregistration/v1beta1', 'kubernetes/typed/apps/v1', 'kubernetes/typed/apps/v1beta1', 'kubernetes/typed/apps/v1beta2', 'kubernetes/typed/auditregistration/v1alpha1', 'kubernetes/typed/authentication/v1', 'kubernetes/typed/authentication/v1beta1', 'kubernetes/typed/authorization/v1', 'kubernetes/typed/authorization/v1beta1', 'kubernetes/typed/autoscaling/v1', 'kubernetes/typed/autoscaling/v2beta1', 'kubernetes/typed/autoscaling/v2beta2', 'kubernetes/typed/batch/v1', 'kubernetes/typed/batch/v1beta1', 'kubernetes/typed/batch/v2alpha1', 'kubernetes/typed/certificates/v1beta1', 'kubernetes/typed/coordination/v1beta1', 'kubernetes/typed/core/v1', 'kubernetes/typed/events/v1beta1', 'kubernetes/typed/extensions/v1beta1', 'kubernetes/typed/networking/v1', 'kubernetes/typed/policy/v1beta1', 'kubernetes/typed/rbac/v1', 'kubernetes/typed/rbac/v1alpha1', 'kubernetes/typed/rbac/v1beta1', 'kubernetes/typed/scheduling/v1alpha1', 'kubernetes/typed/scheduling/v1beta1', 'kubernetes/typed/settings/v1alpha1', 'kubernetes/typed/storage/v1', 'kubernetes/typed/storage/v1alpha1', 'kubernetes/typed/storage/v1beta1', 'pkg/apis/clientauthentication', 'pkg/apis/clientauthentication/v1alpha1', 'pkg/apis/clientauthentication/v1beta1', 'pkg/version', 'plugin/pkg/client/auth', 'plugin/pkg/client/auth/azure', 'plugin/pkg/client/auth/exec', 'plugin/pkg/client/auth/gcp', 'plugin/pkg/client/auth/oidc', 'plugin/pkg/client/auth/openstack', 'rest', 'rest/watch', 'restmapper', 'testing', 'third_party/forked/golang/template', 'tools/auth', 'tools/cache', 'tools/clientcmd', 'tools/clientcmd/api', 'tools/clientcmd/api/latest', 'tools/clientcmd/api/v1', 'tools/leaderelection', 'tools/leaderelection/resourcelock', 'tools/metrics', 'tools/pager', 'tools/record', 'tools/reference', 'transport', 'util/buffer', 'util/cert', 'util/connrotation', 'util/flowcontrol', 'util/homedir', 'util/integer', 'util/jsonpath', 'util/retry', 'util/workqueue']])
        build(['pruneopts': 'T', 'digest': '1:dc1ae99dcab96913d81ae970b1f7a7411a54199b14bfb17a7e86f9a56979c720', 'name': 'k8s.io/code-generator', 'commit': 'c2090bec4d9b1fb25de3812f868accc2bc9ecbae', 'subpackages': ['cmd/client-gen', 'cmd/client-gen/args', 'cmd/client-gen/generators', 'cmd/client-gen/generators/fake', 'cmd/client-gen/generators/scheme', 'cmd/client-gen/generators/util', 'cmd/client-gen/path', 'cmd/client-gen/types', 'cmd/conversion-gen', 'cmd/conversion-gen/args', 'cmd/conversion-gen/generators', 'cmd/deepcopy-gen', 'cmd/deepcopy-gen/args', 'cmd/informer-gen', 'cmd/informer-gen/args', 'cmd/informer-gen/generators', 'cmd/lister-gen', 'cmd/lister-gen/args', 'cmd/lister-gen/generators', 'pkg/util']])
        build(['pruneopts': 'T', 'digest': '1:06449c9193d3d1f9375b97d1ce8a3f7a59d531c69ca34a6b0663cf3c144c2178', 'name': 'k8s.io/gengo', 'commit': 'e17681d19d3ac4837a019ece36c2a0ec31ffe985', 'branch': 'master', 'subpackages': ['args', 'examples/deepcopy-gen/generators', 'examples/set-gen/sets', 'generator', 'namer', 'parser', 'types']])
        build(['pruneopts': 'NT', 'digest': '1:300621bb4f98c1440b7298b376058928baf1fceb221a7f4520a92b7b9919bb3d', 'name': 'k8s.io/klog', 'commit': 'e531227889390a39d9533dde61f590fe9f4b0035', 'tag': 'v0.3.0', 'subpackages': ['...']])
        build(['pruneopts': 'NT', 'digest': '1:c48a795cd7048bb1888273bc604b6e69b22f9b8089c3df65f77cc527757b515c', 'name': 'k8s.io/kube-openapi', 'commit': '0cf8f7e6ed1d2e3d47d02e3b6e559369af24d803', 'subpackages': ['cmd/openapi-gen', 'cmd/openapi-gen/args', 'pkg/common', 'pkg/generators', 'pkg/generators/rules', 'pkg/util/proto', 'pkg/util/sets']])
        build(['pruneopts': 'NT', 'digest': '1:06035489efbd51ccface65fc878ceeb849aba05b2f9443c8993f363fc96e80ac', 'name': 'sigs.k8s.io/controller-runtime', 'commit': '12d98582e72927b6cd0123e2b4e819f9341ce62c', 'tag': 'v0.1.10', 'subpackages': ['pkg/cache', 'pkg/cache/internal', 'pkg/client', 'pkg/client/apiutil', 'pkg/client/config', 'pkg/controller', 'pkg/controller/controllerutil', 'pkg/event', 'pkg/handler', 'pkg/internal/controller', 'pkg/internal/controller/metrics', 'pkg/internal/recorder', 'pkg/leaderelection', 'pkg/manager', 'pkg/metrics', 'pkg/patch', 'pkg/predicate', 'pkg/reconcile', 'pkg/recorder', 'pkg/runtime/inject', 'pkg/runtime/log', 'pkg/runtime/scheme', 'pkg/runtime/signals', 'pkg/source', 'pkg/source/internal', 'pkg/webhook/admission', 'pkg/webhook/admission/types', 'pkg/webhook/internal/metrics', 'pkg/webhook/types']])
        build(['pruneopts': 'NT', 'digest': '1:00eecd8f1e0541da85a37549f6514c4b3517e2e000b74a0dc9f47cee07d7e1b5', 'name': 'sigs.k8s.io/controller-tools', 'commit': '9d55346c2bde73fb3326ac22eac2e5210a730207', 'subpackages': ['pkg/crd/generator', 'pkg/crd/util', 'pkg/internal/codegen', 'pkg/internal/codegen/parse', 'pkg/internal/general', 'pkg/util']])
        build(['pruneopts': 'NT', 'digest': '1:8730e0150dfb2b7e173890c8b9868e7a273082ef8e39f4940e3506a481cf895c', 'name': 'sigs.k8s.io/yaml', 'commit': 'fd68e9863619f6ec2fdd8625fe1f02e7c877e480', 'tag': 'v1.1.0', 'subpackages': ['...']])
    }
}

goBuild {
    go "build -o ${binaryFullPath} ${golang.packagePath}/cmd/manager"
    outputs.file binaryFullPath
}

import com.bmuschko.gradle.docker.tasks.image.*

task copyDockerFiles(type: Copy) {
    from 'docker'
    into buildDir
}

task dockerImage(type: DockerBuildImage, group: 'Docker', description: 'Build operator Docker image') {
    dependsOn goBuild, copyDockerFiles
    inputDir = buildDir
    tags.add("datastax/dse-${project.name}:$version")
}

assemble.dependsOn goBuild, dockerImage

task upLocal(type: LocalOperatorStart, group: 'Run', description: 'Run the operator locally against the configured k8s cluster') {
    dependsOn goBuild
}

class LocalOperatorStart extends Exec {

    LocalOperatorStart() {
        environment.WATCH_NAMESPACE = 'default'
        commandLine project.binaryFullPath
    }

    @Option(option="namespace", description="k8s namespace to watch for events, default to 'default'")
    void setNamespace(String ns) {
        environment.WATCH_NAMESPACE = ns
    }
}
